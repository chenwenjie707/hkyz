import{d as e,u as a,s as l,r as t,o,a as n,b as r,t as s,j as i,D as p,a8 as d,y as b,q as m,a6 as g,a7 as u}from"./chunk-CTEpfDoj.js";import{_ as c}from"./chunk-CG9087of.js";import{u as y,i as f}from"./chunk-BHRaS9DG.js";const v={class:"overflow-y-auto"},z={class:"flex items-center justify-start gap-10"},N={class:"flex flex-col"},k={class:"form-control"},h={class:"cursor-pointer label"},A={class:"label-text"},x=e({__name:"PersonAlready",setup(e){const{t:x}=a(),T=y().personConfig,{getAlreadyPersonList:j,getAlreadyPersonDetail:_}=l(T),P=t(!1);function S(e){T.moveAlreadyToNot(e)}function W(){let e=JSON.parse(JSON.stringify(_.value));for(let l=0;l<e.length;l++)delete e[l].x,delete e[l].y,delete e[l].id,delete e[l].createTime,delete e[l].updateTime,delete e[l].prizeId,e[l].isWin?e[l].isWin=f.global.t("data.yes"):e[l].isWin=f.global.t("data.no"),e[l].prizeTime=e[l].prizeTime.join(","),e[l].prizeName=e[l].prizeName.join(",");let a=JSON.stringify(e);if(a=a.replaceAll(/uid/g,f.global.t("data.number")).replaceAll(/isWin/g,f.global.t("data.isWin")).replaceAll(/department/g,f.global.t("data.department")).replaceAll(/name/g,f.global.t("data.name")).replaceAll(/identity/g,f.global.t("data.identity")).replaceAll(/prizeName/g,f.global.t("data.prizeName")).replaceAll(/prizeTime/g,f.global.t("data.prizeTime")),e=JSON.parse(a),e.length>0){const a=g.json_to_sheet(e),l=g.book_new();g.book_append_sheet(l,a,"Sheet1"),u(l,"data.xlsx")}}const w=[{label:f.global.t("data.number"),props:"uid",sort:!0},{label:f.global.t("data.name"),props:"name"},{label:f.global.t("data.department"),props:"department"},{label:f.global.t("data.identity"),props:"identity"},{label:f.global.t("data.prizeName"),props:"prizeName",sort:!0},{label:f.global.t("data.operation"),actions:[{label:f.global.t("data.removePerson"),type:"btn-info",onClick:e=>{S(e)}}]}],C=[{label:f.global.t("data.number"),props:"uid",sort:!0},{label:f.global.t("data.number"),props:"name"},{label:f.global.t("data.department"),props:"department"},{label:f.global.t("data.identity"),props:"identity"},{label:f.global.t("data.prizeName"),props:"prizeName",sort:!0},{label:f.global.t("data.prizeTime"),props:"prizeTime"},{label:f.global.t("data.operation"),actions:[{label:f.global.t("data.removePerson"),type:"btn-info",onClick:e=>{S(e)}}]}];return(e,a)=>(o(),n("div",v,[r("h2",null,s(i(x)("viewTitle.winnerManagement")),1),r("div",z,[r("div",null,[r("span",null,s(i(x)("table.luckyPeopleNumber"))+"ï¼š",1),r("span",null,s(i(j).length),1)]),r("div",N,[r("div",k,[r("label",h,[r("span",A,s(i(x)("table.detail"))+":",1),p(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),type:"checkbox",class:"border-solid toggle toggle-primary border-1"},null,512),[[d,P.value]])])])]),r("button",{class:"btn btn-accent btn-sm",onClick:W},s(i(x)("button.exportResult")),1)]),P.value?m("",!0):(o(),b(c,{key:0,"table-columns":w,data:i(j)},null,8,["data"])),P.value?(o(),b(c,{key:1,"table-columns":C,data:i(_)},null,8,["data"])):m("",!0)]))}});export{x as default};
